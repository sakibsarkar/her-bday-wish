import "./BirthdayCake.css";
const BirthdayCake = ({
  onCanldeBlow,
  isCandleBlowed,
}: {
  onCanldeBlow?: () => void;
  isCandleBlowed?: boolean;
}) => {
  const handleBlowout = () => {
    const flame = document.querySelector(".flame") as HTMLElement;

    if (!flame) {
      return;
    }
    // Add the "out" animation
    flame.classList.add("out");

    // Create smoke
    const candle = document.querySelector(".candle");
    const smoke = document.createElement("div");
    smoke.classList.add("smoke");
    if (candle) {
      candle.appendChild(smoke);
    }

    onCanldeBlow?.();

    // Remove flame completely after animation
    setTimeout(() => {
      flame.style.display = "none";
    }, 600);
  };

  return (
    <>
      <div className="cake">
        <div className="plate"></div>
        <div className="layer layer-bottom"></div>
        <div className="layer layer-middle"></div>
        <div className="layer layer-top"></div>
        <div className="icing"></div>
        <div className="drip drip1"></div>
        <div className="drip drip2"></div>
        <div className="drip drip3"></div>
        <div className="candle">
          <div className="flame"></div>
        </div>
      </div>
      {!isCandleBlowed ? (
        <>
          <div className="w-fit z-[999999999] absolute bottom-[15%] center flex-col gap-1">
            <button
              onClick={handleBlowout}
              id="blowBtn"
              className="w-[100px] h-[100px] bg-red-600 rounded-full center p-1 border-[6] border-dark cursor-pointer scale-animation"
            >
              <span className="w-full h-full bg-transparent rounded-full center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  version="1.1"
                  width="512"
                  height="512"
                  x="0"
                  y="0"
                  viewBox="0 0 1700 1700"
                  className="w-[70px] h-[70px]"
                >
                  <g>
                    <g fill="#212121">
                      <path
                        d="M106 1354.8c-8.5 0-16.8-4.6-21.1-12.6-6.3-11.7-2-26.2 9.7-32.5 54.6-29.6 138.6-39 183.8-42 70.9-4.7 143.9-.4 195.4 11.4 85.5 19.6 138.8 5.8 146.8 3.5 22.8-11.1 29-36.8 20.9-85.7-4.5-27 4.5-45.7 12.8-56.6 8.9-11.7 19.1-17.2 21.1-18.1.5-.2.9-.4 1.4-.6 7.3-3.2 15.8-9 18.8-12.8-8.5-15.4-25.1-24.3-25.3-24.4-8.6-4.3-13.7-13.3-13.1-22.9s6.8-17.9 15.8-21.1c18.6-6.7 27.7-17.5 30.9-23.7-15.9-8.7-31.8-22.3-40.5-30.2-5.8-5.3-10.6-11.3-14.1-17.8-10.4-19-9.6-39.1 2.3-56.4 8.8-12.8 22.3-22.1 33.1-28.8 2.2-1.4 4.5-2.7 6.7-4 18.7-11.2 20.7-12.9 17.6-27.4-4.1-19.4-42.6-68.4-67.6-95.8-77.8-74.3-62.2-145.4-59.9-154.3 24.9-96.9 17.2-173.4-22.9-227.2-24.7-33.2-61.1-57.6-108.4-72.7-36.4-11.6-65.8-13-66.1-13-13.2-.5-23.5-11.7-23-24.9s11.6-23.5 24.8-23.1c5.6.2 137.3 6.1 210.9 104.7 49.4 66.1 59.8 156.3 31.1 268.2-.1.5-.1.4-.2.7-1 4-11.2 52 47.3 107.4l1.2 1.2c.7.8 17.5 19.1 35.4 42.1 25.9 33.2 40.4 58.3 44.3 76.7 10.3 48.4-19.9 66.5-39.9 78.5l-6 3.6c-3.6 2.2-14.6 9.1-18.8 15.2-1.3 2-1.8 2.6.2 6.3 1 1.8 2.5 3.6 4.4 5.4 13.1 12 26.1 21.5 34.7 25.4 14.8 6.7 23.5 21.4 22.8 38.3-.8 18.4-12 37-29.6 51.5 6 6.5 11.7 14.4 16.2 23.6 5.4 11 5.9 22.9 1.6 34.3-8.8 23.4-36.1 37.2-44.5 40.9-3.1 2-10.6 8.5-8.1 23.9 3.3 19.5 6.4 45.1 1.9 69.8-5.9 32-23.7 55.5-51.5 68.1-.7.3-1.5.6-2.2.9-2.7.9-68.4 22.3-173.9-1.8-47.2-10.8-115.1-14.7-181.6-10.3-70.2 4.6-130.1 17.8-164.1 36.3-3.7 1.8-7.6 2.8-11.5 2.8z"
                        fill="#ffffff"
                        opacity="1"
                        data-original="#212121"
                      ></path>
                      <path
                        d="M337.4 704.1c-6.7 0-13.3-2.8-18.1-8.2-8.7-10-7.7-25.1 2.3-33.9 5.5-4.8 54.8-46.5 104.1-41.6 21 2.1 39.3 12.4 52.7 29.9 8.1 10.5 6.1 25.6-4.4 33.7s-25.6 6.1-33.7-4.4C435 672.5 429 669 421 668.2c-24.6-2.4-58 21.4-67.8 30-4.5 4-10.2 5.9-15.8 5.9zM1080 1099.2c-144.8 0-262.2-17.1-267.4-17.8-13.1-1.9-22.2-14.1-20.2-27.2 1.9-13.1 14.1-22.2 27.2-20.2 1.5.2 131.3 19 281.9 17.2 195.6-2.4 337.4-38 409.9-103 41.4-37.1 60.5-83.1 58.4-140.6-.5-13.2 9.9-24.4 23.1-24.9 13.3-.5 24.4 9.9 24.9 23.1 2.6 71.6-22.4 131.5-74.4 178.1-46.1 41.3-113.9 71.9-201.5 91.1-68.4 14.9-149.3 23.1-240.5 24.2-7.2-.1-14.3 0-21.4 0z"
                        fill="#ffffff"
                        opacity="1"
                        data-original="#212121"
                      ></path>
                      <path
                        d="M816.1 982.4c-12.7 0-23.3-10-24-22.8-.7-13.2 9.5-24.5 22.8-25.2 75.7-3.7 286.2-25.5 351-80.6 25.1-21.4 20.4-35.2 18.8-39.8-7.2-21.1-39.6-38.2-57-39-13.2-.6-23.5-11.8-22.9-25s11.8-23.5 25-22.9c17.8.8 38.5 8.1 57 20 21.3 13.7 36.6 32 43.3 51.4 6.3 18.4 10.4 54.8-33.2 91.9-38.8 33-115 58.5-226.5 75.8-81 12.6-150.3 16.1-153.2 16.2h-1.1zM1082.1 1459c-12.3 0-22.7-9.3-23.9-21.8-1.2-13.2 8.5-24.9 21.7-26.1 22.5-2.2 85.5-15.3 106.3-49.8 9.7-16.1 9.4-35.9-.8-60.6-25.9-62.9-122.4-89.1-198.9-99.9-87.2-12.4-168.2-7.8-169-7.8-13.3.8-24.6-9.3-25.4-22.6-.8-13.2 9.3-24.6 22.5-25.4 3.5-.2 86.7-4.9 178.6 8.2 54.9 7.8 101.5 20.4 138.5 37.4 49.3 22.7 82.3 53.6 98 91.8 16.2 39.3 15.3 74.2-2.6 103.8-16.3 26.9-45.7 47.4-87.4 60.8-29.3 9.4-54.4 11.8-55.5 11.9-.7 0-1.4.1-2.1.1z"
                        fill="#ffffff"
                        opacity="1"
                        data-original="#212121"
                      ></path>
                    </g>
                  </g>
                </svg>
              </span>
            </button>

            <span className="text-text-main font-bold">
              &quot;Fooo....&quot; dite aikhan click koro ☝️
            </span>
          </div>
        </>
      ) : (
        ""
      )}
    </>
  );
};

export default BirthdayCake;
